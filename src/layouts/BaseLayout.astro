---
import "@/styles/global.css";
import SEOHead from "@/components/astro/SEOHead.astro";
import JsonLd from "@/components/astro/JsonLd.astro";
import Navbar from "@/components/astro/Navbar.astro";
import Footer from "@/components/astro/Footer.astro";
import { organizationSchema, webSiteSchema } from "@/lib/schemas";

interface Props {
  title?: string;
  titleOverride?: string;
  description?: string;
  ogImage?: string;
  ogType?: string;
  canonical?: string;
  noindex?: boolean;
}

const props = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <SEOHead {...props} />
    <JsonLd schema={[organizationSchema(), webSiteSchema()]} />
    <script is:inline src="https://analytics.ahrefs.com/analytics.js" data-key="FJHFMPENBhbseFxbcHVf+Q" async></script>
  </head>
  <body class="grain-overlay">
    <Navbar />
    <main>
      <slot />
    </main>
    <Footer />

    <script>
      // Fade-in on scroll
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("visible");
            }
          });
        },
        { threshold: 0.15 }
      );

      document
        .querySelectorAll(".fade-in")
        .forEach((el) => observer.observe(el));
    </script>
  </body>
</html>
